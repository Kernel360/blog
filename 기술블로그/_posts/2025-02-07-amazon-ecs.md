---
layout: post  
title: "Amazon ECS(Elastic Container Service)ì„ í™œìš©í•œ ìš´ì˜ í™˜ê²½ êµ¬ì„±"  
author: "ê¹€ì§„ìš°"  
categories: "ë°±ì—”ë“œ ê¸°ìˆ ë¸”ë¡œê·¸"  
banner:  
  background: "#000"  
  height: "100vh"  
  min_height: "38vh"  
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"  
  tags: ["AWS", "ECS", "ECR", "Docker", "CI/CD", "Jenkins"]
---

# Amazon ECSë¥¼ í™œìš©í•œ ë¬´ì¤‘ë‹¨ ë°°í¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

ì €í¬ëŠ” ìš´ì˜ í™˜ê²½ì— **Amazon ECS(Amazon Elastic Container Service)**ë¥¼ ë„ì…í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ, **GitHubì™€ Jenkinsë¥¼ ì—°ë™**í•˜ì—¬ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•¨ìœ¼ë¡œì¨ íš¨ìœ¨ì ì¸ ë°°í¬ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” **GitHubì—ì„œ ë©”ì¸ ë¸Œëœì¹˜ì— ì½”ë“œê°€ ë¨¸ì§€ë˜ì—ˆì„ ë•Œ ECSê°€ ìµœì‹  ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ê°€ì ¸ì™€ ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ë˜ëŠ” ê³¼ì •**ê³¼ **ë¬¸ì œ ë°œìƒ ì‹œ ë¡¤ë°± ì „ëµ**ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## 1. ECS ê¸°ë°˜ CI/CD íŒŒì´í”„ë¼ì¸ ê°œìš”

### ğŸ”¹ ì „ì²´ ë°°í¬ íë¦„

1. **GitHubì—ì„œ ì½”ë“œê°€ ë©”ì¸ ë¸Œëœì¹˜ì— ë¨¸ì§€**ë˜ë©´ Jenkinsê°€ íŒŒì´í”„ë¼ì¸ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. Jenkinsì—ì„œ **Dockerë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹Œë“œ**í•©ë‹ˆë‹¤.
3. ë¹Œë“œëœ Docker ì´ë¯¸ì§€ë¥¼ **Amazon Elastic Container Registry(ECR)**ì— Pushí•©ë‹ˆë‹¤.
4. ECSëŠ” **ECRì— ë“±ë¡ëœ ìµœì‹  ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ ì‹¤í–‰**í•©ë‹ˆë‹¤.
5. **Application Load Balancer(ALB)ë¥¼ ì´ìš©í•´ ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬**ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
6. **ë¬¸ì œ ë°œìƒ ì‹œ ìë™ ë¡¤ë°± ì „ëµ**ì„ ì ìš©í•©ë‹ˆë‹¤.

---

## 2. Jenkinsì™€ ECSë¥¼ í™œìš©í•œ ë°°í¬ ê³¼ì •

### ğŸ— 1. Dockerë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ
```sh
# Jenkinsì—ì„œ ì‹¤í–‰ë  Docker ë¹Œë“œ ëª…ë ¹ì–´
docker build -t my-app:latest .
```

### ğŸ“Œ 2. ECRì— Docker ì´ë¯¸ì§€ Push
```sh
# AWS ECR ë¡œê·¸ì¸ (Jenkinsì—ì„œ ìˆ˜í–‰)
aws ecr get-login-password --region ap-northeast-2 | docker login --username AWS --password-stdin <AWS_ACCOUNT_ID>.dkr.ecr.ap-northeast-2.amazonaws.com

# ECRì— íƒœê·¸ ë° Push
docker tag my-app:latest <AWS_ACCOUNT_ID>.dkr.ecr.ap-northeast-2.amazonaws.com/my-app:latest
docker push <AWS_ACCOUNT_ID>.dkr.ecr.ap-northeast-2.amazonaws.com/my-app:latest
```

### ğŸš€ 3. ECSì—ì„œ ìµœì‹  ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
ECS ì„œë¹„ìŠ¤ëŠ” íƒœìŠ¤í¬ ì •ì˜(Task Definition)ì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ **ECRì—ì„œ ê°€ì ¸ì™€ ì—…ë°ì´íŠ¸**í•©ë‹ˆë‹¤.
```sh
aws ecs update-service --cluster my-cluster --service my-service --force-new-deployment
```

### ğŸ”„ 4. ë¡¤ë§ ì—…ë°ì´íŠ¸ ë° ë¡¤ë°± ì „ëµ
ECSëŠ” **ALB(Application Load Balancer)**ë¥¼ í™œìš©í•˜ì—¬ íŠ¸ë˜í”½ì„ ì ì§„ì ìœ¼ë¡œ ì‹ ê·œ ì»¨í…Œì´ë„ˆë¡œ ì „í™˜í•˜ëŠ” **ë¡¤ë§ ì—…ë°ì´íŠ¸(Rolling Update)** ë°©ì‹ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ë©´ ALBëŠ” í—¬ìŠ¤ ì²´í¬(Health Check)ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ì •ìƒ ìƒíƒœê°€ í™•ì¸ë˜ë©´ ê¸°ì¡´ ì»¨í…Œì´ë„ˆì—ì„œ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¡œ íŠ¸ë˜í”½ì„ ì´ë™í•©ë‹ˆë‹¤.
- ê¸°ì¡´ ì»¨í…Œì´ë„ˆëŠ” ì¢…ë£Œë©ë‹ˆë‹¤.

#### ğŸš¨ ë¡¤ë°± ì „ëµ
ë§Œì•½ ë°°í¬ ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ **ìë™ ë¡¤ë°±**ì´ ì ìš©ë˜ì–´ ê¸°ì¡´ ì•ˆì •ì ì¸ ìƒíƒœë¡œ ë³µêµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ALB í—¬ìŠ¤ ì²´í¬ê°€ ì‹¤íŒ¨í•  ê²½ìš° ìë™ìœ¼ë¡œ ì´ì „ ì´ë¯¸ì§€ë¡œ ë³µêµ¬í•©ë‹ˆë‹¤.
- Jenkins íŒŒì´í”„ë¼ì¸ì—ì„œë„ **ë¹Œë“œ ì‹¤íŒ¨ ë˜ëŠ” í—¬ìŠ¤ ì²´í¬ ì‹¤íŒ¨ ì‹œ ë¡¤ë°± ëª…ë ¹**ì„ ì‹¤í–‰í•˜ë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

```sh
# ECS ì„œë¹„ìŠ¤ ë¡¤ë°± ì˜ˆì‹œ
aws ecs update-service --cluster my-cluster --service my-service --desired-count 2 --rollback-deployment
```

---

## 3. ECS CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±ì˜ ì¥ë‹¨ì 

### âœ… ì¥ì 
- **ìë™í™”ëœ ë°°í¬**: GitHub, Jenkins, ECS, ECRì„ ì—°ë™í•˜ì—¬ **CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•**í•¨ìœ¼ë¡œì¨ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì´ ìë™ìœ¼ë¡œ ë°°í¬ë©ë‹ˆë‹¤.
- **ë¬´ì¤‘ë‹¨ ë°°í¬**: ALBì™€ ë¡¤ë§ ì—…ë°ì´íŠ¸ë¥¼ í™œìš©í•˜ì—¬ **ë°°í¬ ì¤‘ì—ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒ ë™ì‘**í•©ë‹ˆë‹¤.
- **íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**: Fargate ê¸°ë°˜ ECSë¥¼ ì‚¬ìš©í•˜ë©´ **ì„œë²„ ê´€ë¦¬ ì—†ì´ ì»¨í…Œì´ë„ˆ ì‹¤í–‰**ì´ ê°€ëŠ¥í•˜ë©°, EC2 ê¸°ë°˜ ECSë¥¼ ì‚¬ìš©í•˜ë©´ **ë¹„ìš© ìµœì í™” ë° ìœ ì—°í•œ í™•ì¥**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### âŒ ë‹¨ì 
- **ë¹„ìš© ë¬¸ì œ**: FargateëŠ” ì„œë²„ ê´€ë¦¬ê°€ í•„ìš” ì—†ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, **EC2 ê¸°ë°˜ ECSë³´ë‹¤ ë¹„ìš©ì´ ë†’ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤**. í˜„ì—…ì—ì„œëŠ” ë¹„ìš© ìµœì í™”ë¥¼ ìœ„í•´ EC2 ê¸°ë°˜ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.
- **ì œí•œì ì¸ ì»¤ìŠ¤í„°ë§ˆì´ì§•**: ECSëŠ” Kubernetes(EKS)ë³´ë‹¤ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜ì´ ì œí•œì ì´ë©°, Kubernetesì˜ í’ë¶€í•œ ìƒíƒœê³„ë¥¼ í™œìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

---

## 4. ê²°ë¡ 

Amazon ECSì™€ CI/CD íŒŒì´í”„ë¼ì¸ì„ í™œìš©í•˜ë©´ **ìë™í™”ëœ ì»¨í…Œì´ë„ˆ ë°°í¬ í™˜ê²½ì„ êµ¬ì¶•**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ **GitHub, Jenkins, ECR, ECS, ALBë¥¼ ì¡°í•©**í•˜ë©´ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì„ ì‹ ì†í•˜ê³  ì•ˆì „í•˜ê²Œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìš´ì˜ ì¤‘ì¸ í™˜ê²½ì—ì„œ **ë°°í¬ ìë™í™”ë¥¼ ê³ ë¯¼í•˜ê³  ìˆë‹¤ë©´, ë¬´ì¤‘ë‹¨ ë°°í¬ê°€ ê°€ëŠ¥í•œ ë¡¤ë§ ì—…ë°ì´íŠ¸ ë°©ì‹ì˜ CI/CD íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•**í•˜ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. ë‹¨, **ë¹„ìš©ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš”êµ¬ì‚¬í•­ì„ ê³ ë ¤**í•˜ì—¬ ECSì™€ EKS ì¤‘ ì í•©í•œ ì†”ë£¨ì…˜ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

> **ğŸ” ì°¸ê³ **: Amazon ECS ê³µì‹ ë¬¸ì„œë¥¼ í™•ì¸í•˜ë ¤ë©´ [AWS ECS ê³µì‹ ë¬¸ì„œ](https://docs.aws.amazon.com/ecs/)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
---

