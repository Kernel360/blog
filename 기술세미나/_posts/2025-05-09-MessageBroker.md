---
layout: post  
title: "MessageBroker"
author: "유재경"
categories: "기술세미나"
banner:
  image: "assets/images/post/2023-11-05.webp"
  background: "#000"
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"
  tags: ["MessageBroker", "MessageQueue", "RabbitMQ", "Kafka", "AWS SQS", "Redis"]
---

# 메시지 브로커(Message Broker), 알고 쓰자!  
_비동기 시스템을 연결하는 보이지 않는 연결고리_

마이크로서비스, 실시간 알림, 주문 처리 시스템, IoT...  
이런 키워드들 속에서 빠지지 않고 등장하는 개념이 바로 **“메시지 브로커(Message Broker)”**입니다. 이름은 들어봤는데, 정확히 무슨 역할을 하는지 감이 잘 안 오신다고요? 이 글에서는 메시지 브로커의 핵심 개념부터 종류, 장단점까지 한 번에 정리해보겠습니다.

---

## 💬 메시지 브로커란?

메시지 브로커는 시스템 간 메시지를 **비동기 방식으로 주고받을 수 있도록 중간에서 중계해주는 역할**을 합니다. 이를 가능하게 해주는 미들웨어를 **MOM(Message Oriented Middleware)**이라고 부르죠.

예를 들어, A라는 시스템이 메시지를 보내고, B라는 시스템이 이 메시지를 받을 준비가 안 되어 있다면? 메시지 브로커는 이 메시지를 **큐(Queue)**에 저장해두고 B가 준비됐을 때 전달합니다. 이 덕분에 시스템 간의 **결합도를 낮추고 유연성**을 확보할 수 있어요.

---

## 🔁 메시지 흐름은 이렇게!

1. **Producer**: 메시지를 생성해서 브로커(큐)에 보냅니다.  
2. **Queue**: 메시지를 임시 저장소에 넣고 기다립니다.  
3. **Consumer**: 큐에서 메시지를 꺼내 처리합니다.

이 흐름은 마치 택배 시스템과 비슷하죠. 보낸 사람(Producer)은 택배회사(Broker)를 통해 물건을 보내고, 받는 사람(Consumer)은 본인이 준비됐을 때 택배를 수령하는 식입니다.

---

## 🔀 메시징 패턴, 상황에 따라 다르게!

### 📦 Point-to-Point
- **1개의 Producer, 1개의 Consumer**
- 소비자가 여러 명이면 하나만 처리합니다.
- 예: 주문 처리 시스템, 이메일 발송

### 🔄 Request-Response
- 요청-응답 구조. 응답을 기다리는 패턴.
- 예: 인증 요청, 파일 처리, IoT 명령 시스템

### 📣 Publish-Subscribe
- 하나의 메시지를 여러 Consumer에게 전파
- 예: 실시간 알림, 뉴스 전송, 실시간 분석 시스템

> 💡 **Tip:** Pub/Sub 패턴에서는 메시지 중복에 대비해 **멱등성(idempotency)** 처리를 꼭 고려해야 해요. 같은 메시지가 여러 번 와도 결과는 한 번만 일어나야 하니까요!

---

## ✅ 장점 vs ❗단점

| 장점 | 단점 |
|------|------|
| 비동기 통신 | 설정과 운영의 복잡성 |
| 확장성 뛰어남 | 처리 지연 발생 가능성 |
| 다양한 프로토콜 지원 | 데이터 일관성 보장 어려움 |
| 메시지 유실 방지 | 가용성 이슈 발생 가능 |

특히, **분산 시스템이나 이벤트 기반 아키텍처**를 설계할 땐 메시지 브로커가 없으면 매우 어렵습니다. 하지만 도입 시 복잡성과 오버헤드도 고려해야 하죠.

---

## 🛠️ 어떤 메시지 브로커를 쓸까?

| 브로커 | 특징 |
|--------|------|
| **Kafka** | 초대용량 로그/스트리밍 처리에 강력 |
| **RabbitMQ** | 안정성 높은 전통적 브로커, 다양한 패턴 지원 |
| **AWS SQS** | 완전관리형 큐, 간편한 운영 |
| **Redis** | 빠른 속도, 휘발성 메시징에 적합 |

---

## 🧩 마무리하며

메시지 브로커는 단순한 기술이 아닌, **시스템 간 의존성을 줄이고, 장애에 강하고, 확장 가능한 아키텍처를 만드는 핵심 요소**입니다. 시스템이 복잡해질수록 이런 메시징 시스템이 더욱 빛을 발하죠.

앞으로 마이크로서비스나 실시간 시스템을 설계하게 된다면, 꼭 메시지 브로커를 떠올려 보세요. 알고 쓰면 훨씬 강력합니다!
